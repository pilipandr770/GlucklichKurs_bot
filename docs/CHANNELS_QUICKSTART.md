# –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∫–∞–Ω–∞–ª—ñ–≤

## ‚ö†Ô∏è –í–ê–ñ–õ–ò–í–û: –í–∏–ø—Ä–∞–≤—Ç–µ ID –∫–∞–Ω–∞–ª—ñ–≤ —É .env

### –ü–æ—Ç–æ—á–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è (–ù–ï–ü–†–ê–í–ò–õ–¨–ù–ê):
```env
INTRO_CHANNEL_ID=https://web.telegram.org/k/#-2911331449
PAID_CHANNEL_ID=https://web.telegram.org/k/#-3140324634
```

### –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è:
```env
INTRO_CHANNEL_ID=-1002911331449       # –û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ
PAID_CHANNEL_ID=-1003140324634        # –û–±–æ–≤'—è–∑–∫–æ–≤–æ
```

---

## üîß –Ø–∫ –æ—Ç—Ä–∏–º–∞—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π ID –∫–∞–Ω–∞–ª—É

### –ú–µ—Ç–æ–¥ 1: –ß–µ—Ä–µ–∑ @getmyid_bot
1. –î–æ–¥–∞–π—Ç–µ –±–æ—Ç–∞ `@getmyid_bot` –¥–æ –≤–∞—à–æ–≥–æ –∫–∞–Ω–∞–ª—É —è–∫ –∞–¥–º—ñ–Ω–∞
2. –ù–∞–ø–∏—à—ñ—Ç—å —â–æ—Å—å —É –∫–∞–Ω–∞–ª
3. –ë–æ—Ç –ø–æ–∫–∞–∂–µ ID –∫–∞–Ω–∞–ª—É (—Ñ–æ—Ä–º–∞—Ç: `-100...`)
4. –í–∏–¥–∞–ª—ñ—Ç—å `@getmyid_bot` –ø—ñ—Å–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è ID

### –ú–µ—Ç–æ–¥ 2: –ß–µ—Ä–µ–∑ @userinfobot
1. –ü–µ—Ä–µ—à–ª—ñ—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ –∫–∞–Ω–∞–ª—É –¥–æ `@userinfobot`
2. –ë–æ—Ç –ø–æ–∫–∞–∂–µ ID –∫–∞–Ω–∞–ª—É

### –ú–µ—Ç–æ–¥ 3: –í—Ä—É—á–Ω—É –∑ URL
–í–∞—à URL: `https://web.telegram.org/k/#-2911331449`
–ü—Ä–∞–≤–∏–ª—å–Ω–∏–π ID: `-1002911331449` (–¥–æ–¥–∞–π—Ç–µ `-100` –Ω–∞ –ø–æ—á–∞—Ç–æ–∫)

---

## ü§ñ –î–æ–¥–∞–π—Ç–µ –±–æ—Ç–∞ –∞–¥–º—ñ–Ω–æ–º –¥–æ –ø–ª–∞—Ç–Ω–æ–≥–æ –∫–∞–Ω–∞–ª—É

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:
1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –≤–∞—à –ø–ª–∞—Ç–Ω–∏–π –∫–∞–Ω–∞–ª —É Telegram
2. **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è ‚Üí –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∏ ‚Üí –î–æ–¥–∞—Ç–∏ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞**
3. –ó–Ω–∞–π–¥—ñ—Ç—å –≤–∞—à–æ–≥–æ –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `@GlucklichKurs_bot`)
4. **–í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –≥–∞–ª–æ—á–∫—É: "Invite users via link"** ‚úÖ
5. –û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ: "Post messages" (—è–∫—â–æ –±–æ—Ç –ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏–º–µ –∫–æ–Ω—Ç–µ–Ω—Ç)
6. –ó–±–µ—Ä–µ–∂—ñ—Ç—å –∑–º—ñ–Ω–∏

---

## ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### –¢–µ—Å—Ç 1: –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–∫—Ä–∏–ø—Ç –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏
```powershell
python -c "import os; from dotenv import load_dotenv; load_dotenv(); print('INTRO_CHANNEL_ID:', os.getenv('INTRO_CHANNEL_ID')); print('PAID_CHANNEL_ID:', os.getenv('PAID_CHANNEL_ID'))"
```

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
INTRO_CHANNEL_ID: -1002911331449
PAID_CHANNEL_ID: -1003140324634
```

### –¢–µ—Å—Ç 2: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø—É –±–æ—Ç–∞
```python
# –°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª test_channels.py
import os
import asyncio
from aiogram import Bot
from dotenv import load_dotenv

load_dotenv()

async def test_channels():
    bot = Bot(token=os.getenv("TELEGRAM_BOT_TOKEN"))
    
    paid_channel_id = int(os.getenv("PAID_CHANNEL_ID"))
    
    try:
        # –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —á–∏ –±–æ—Ç —î –∞–¥–º—ñ–Ω–æ–º
        chat = await bot.get_chat(paid_channel_id)
        print(f"‚úÖ –ö–∞–Ω–∞–ª –∑–Ω–∞–π–¥–µ–Ω–æ: {chat.title}")
        
        # –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–∞–≤
        bot_member = await bot.get_chat_member(paid_channel_id, bot.id)
        print(f"‚úÖ –°—Ç–∞—Ç—É—Å –±–æ—Ç–∞: {bot_member.status}")
        
        if bot_member.can_invite_users:
            print("‚úÖ –ë–æ—Ç –º–æ–∂–µ –∑–∞–ø—Ä–æ—à—É–≤–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤")
        else:
            print("‚ùå –ë–æ—Ç –ù–ï –ú–û–ñ–ï –∑–∞–ø—Ä–æ—à—É–≤–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤! –î–æ–¥–∞–π—Ç–µ –ø—Ä–∞–≤–æ 'Invite users via link'")
        
    except Exception as e:
        print(f"‚ùå –ü–æ–º–∏–ª–∫–∞: {e}")
        print("–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ:")
        print("1. –ë–æ—Ç –¥–æ–¥–∞–Ω–∏–π –∞–¥–º—ñ–Ω–æ–º –¥–æ –∫–∞–Ω–∞–ª—É")
        print("2. ID –∫–∞–Ω–∞–ª—É –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π (—Ñ–æ—Ä–º–∞—Ç -100...)")
        print("3. –ë–æ—Ç –º–∞—î –ø—Ä–∞–≤–æ 'Invite users via link'")
    
    await bot.session.close()

asyncio.run(test_channels())
```

**–ó–∞–ø—É—Å—Ç—ñ—Ç—å:**
```powershell
python test_channels.py
```

---

## üîó –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ —ñ–Ω–≤–∞–π—Ç-–ª—ñ–Ω–∫—ñ–≤ (TODO)

### –ó–∞—Ä–∞–∑: –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –æ—Ç—Ä–∏–º—É—î –ª–∏—à–µ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –æ–ø–ª–∞—Ç–∏

### –ü–æ—Ç—Ä—ñ–±–Ω–æ: –î–æ–¥–∞—Ç–∏ –∫–æ–¥ —É `app/web/stripe_webhook.py`

**–ó–Ω–∞–π–¥—ñ—Ç—å:**
```python
if user_id:
    user_id = int(user_id)
    mark_paid(user_id, session.id)
```

**–î–æ–¥–∞–π—Ç–µ –ø—ñ—Å–ª—è:**
```python
    # ‚úÖ –í—ñ–¥–ø—Ä–∞–≤–∫–∞ —ñ–Ω–≤–∞–π—Ç-–ª—ñ–Ω–∫—É
    try:
        from aiogram import Bot
        
        bot = Bot(token=os.getenv("TELEGRAM_BOT_TOKEN"))
        paid_channel_id = int(os.getenv("PAID_CHANNEL_ID"))
        
        # –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–≥–æ –ª—ñ–Ω–∫—É
        invite_link = await bot.create_chat_invite_link(
            chat_id=paid_channel_id,
            member_limit=1,  # –¢—ñ–ª—å–∫–∏ –¥–ª—è —Ü—å–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
            name=f"User {user_id}"
        )
        
        # –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É
        await bot.send_message(
            chat_id=user_id,
            text=f"üéâ –í—ñ—Ç–∞—î–º–æ! –í–∞—à–∞ –æ–ø–ª–∞—Ç–∞ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–∞.\n\n"
                 f"‚úÖ –î–æ—Å—Ç—É–ø –¥–æ –≤—Å—ñ—Ö 10 —É—Ä–æ–∫—ñ–≤ –≤—ñ–¥–∫—Ä–∏—Ç–æ\n"
                 f"‚úÖ –ö–æ—É—á-–∞–≥–µ–Ω—Ç –≥–æ—Ç–æ–≤–∏–π –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ –Ω–∞ –ø–∏—Ç–∞–Ω–Ω—è\n\n"
                 f"üîó –ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ –∑–∞–∫—Ä–∏—Ç–æ–≥–æ –∫–∞–Ω–∞–ª—É:\n"
                 f"{invite_link.invite_link}\n\n"
                 f"–ë–∞–∂–∞—î–º–æ —É—Å–ø—ñ—Ö—ñ–≤! üåü"
        )
        
        await bot.session.close()
    except Exception as e:
        print(f"‚ùå –ü–æ–º–∏–ª–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ —ñ–Ω–≤–∞–π—Ç-–ª—ñ–Ω–∫—É: {e}")
```

**–î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è:** `docs/CHANNELS_SETUP.md`

---

## üìù –û–Ω–æ–≤—ñ—Ç—å .env —Ñ–∞–π–ª

```env
# Telegram Bot
TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω

# –ö–∞–Ω–∞–ª–∏ (–í–ò–ü–†–ê–í–¢–ï ID!)
INTRO_CHANNEL_ID=-1002911331449          # –í—Å—Ç—É–ø–Ω–∏–π –∫–∞–Ω–∞–ª (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
PAID_CHANNEL_ID=-1003140324634           # –ü–ª–∞—Ç–Ω–∏–π –∫–∞–Ω–∞–ª (–û–ë–û–í'–Ø–ó–ö–û–í–û)

# OpenAI
OPENAI_API_KEY=–≤–∞—à_–∫–ª—é—á

# Stripe
STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...

# –Ü–Ω—à—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
REMINDER_DAYS=3
```

---

## üéØ –ß–µ–∫–ª–∏—Å—Ç

- [ ] –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ INTRO_CHANNEL_ID —É .env (—Ñ–æ—Ä–º–∞—Ç `-100...`)
- [ ] –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ PAID_CHANNEL_ID —É .env (—Ñ–æ—Ä–º–∞—Ç `-100...`)
- [ ] –ë–æ—Ç –¥–æ–¥–∞–Ω–∏–π –∞–¥–º—ñ–Ω–æ–º –¥–æ –ø–ª–∞—Ç–Ω–æ–≥–æ –∫–∞–Ω–∞–ª—É
- [ ] –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ø—Ä–∞–≤–æ "Invite users via link"
- [ ] –ó–∞–ø—É—â–µ–Ω–æ `test_channels.py` ‚Äî –≤—Å—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ø—Ä–æ–π—à–ª–∏ ‚úÖ
- [ ] –î–æ–¥–∞–Ω–æ –∫–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ —ñ–Ω–≤–∞–π—Ç-–ª—ñ–Ω–∫—ñ–≤ (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ –ø–æ–≤–Ω–∏–π —Ü–∏–∫–ª: –ø–æ–∫—É–ø–∫–∞ ‚Üí –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ª—ñ–Ω–∫—É

---

## ‚ùì –ü—Ä–æ–±–ª–µ–º–∏ —Ç–∞ —Ä—ñ—à–µ–Ω–Ω—è

### –ü–æ–º–∏–ª–∫–∞: "Chat not found"
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π ID –∞–±–æ –±–æ—Ç –Ω–µ –¥–æ–¥–∞–Ω–∏–π –¥–æ –∫–∞–Ω–∞–ª—É  
**–†—ñ—à–µ–Ω–Ω—è:** 
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ñ–æ—Ä–º–∞—Ç ID: `-100...`
2. –î–æ–¥–∞–π—Ç–µ –±–æ—Ç–∞ –∞–¥–º—ñ–Ω–æ–º –¥–æ –∫–∞–Ω–∞–ª—É

### –ü–æ–º–∏–ª–∫–∞: "Not enough rights to invite users"
**–ü—Ä–∏—á–∏–Ω–∞:** –ë–æ—Ç –Ω–µ –º–∞—î –ø—Ä–∞–≤–∞ –∑–∞–ø—Ä–æ—à—É–≤–∞—Ç–∏  
**–†—ñ—à–µ–Ω–Ω—è:** –£ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è—Ö –∫–∞–Ω–∞–ª—É –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –≥–∞–ª–æ—á–∫—É "Invite users via link"

### –Ü–Ω–≤–∞–π—Ç-–ª—ñ–Ω–∫ –Ω–µ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è
**–ü—Ä–∏—á–∏–Ω–∞:** –ö–æ–¥ —â–µ –Ω–µ –¥–æ–¥–∞–Ω–æ –≤ `stripe_webhook.py`  
**–†—ñ—à–µ–Ω–Ω—è:** –î–æ–¥–∞–π—Ç–µ –∫–æ–¥ –∑–≥—ñ–¥–Ω–æ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –≤–∏—â–µ

---

**–î–µ—Ç–∞–ª—å–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è:** `docs/CHANNELS_SETUP.md` (–ø–æ–≤–Ω–∏–π –≥–∞–π–¥ 200+ —Ä—è–¥–∫—ñ–≤)

**–í–µ—Ä—Å—ñ—è:** 2.2.0  
**–ê–≤—Ç–æ—Ä:** Andrii Pylypchuk
